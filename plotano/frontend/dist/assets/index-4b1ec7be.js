(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function z(){}const ft=e=>e;function Ce(e,t){for(const n in t)e[n]=t[n];return e}function Ve(e){return e()}function $e(){return Object.create(null)}function B(e){e.forEach(Ve)}function Z(e){return typeof e=="function"}function j(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function ht(e){return Object.keys(e).length===0}function dt(e,...t){if(e==null)return z;const n=e.subscribe(...t);return n.unsubscribe?()=>n.unsubscribe():n}function Be(e,t,n){e.$$.on_destroy.push(dt(t,n))}function ye(e,t,n){return e.set(n),t}function He(e){return e&&Z(e.destroy)?e.destroy:z}const Ie=typeof window<"u";let _t=Ie?()=>window.performance.now():()=>Date.now(),Qe=Ie?e=>requestAnimationFrame(e):z;const W=new Set;function Ue(e){W.forEach(t=>{t.c(e)||(W.delete(t),t.f())}),W.size!==0&&Qe(Ue)}function pt(e){let t;return W.size===0&&Qe(Ue),{promise:new Promise(n=>{W.add(t={c:e,f:n})}),abort(){W.delete(t)}}}function h(e,t){e.appendChild(t)}function V(e,t,n){e.insertBefore(t,n||null)}function P(e){e.parentNode&&e.parentNode.removeChild(e)}function A(e){return document.createElement(e)}function R(e){return document.createTextNode(e)}function L(){return R(" ")}function yt(){return R("")}function D(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function k(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function mt(e){return Array.from(e.childNodes)}function I(e,t){t=""+t,e.data!==t&&(e.data=t)}function se(e,t){e.value=t??""}let Y;function X(e){Y=e}function gt(){if(!Y)throw new Error("Function called outside component initialization");return Y}function xe(e){gt().$$.on_mount.push(e)}const J=[],Se=[];let K=[];const Ne=[],vt=Promise.resolve();let me=!1;function wt(){me||(me=!0,vt.then(Je))}function ge(e){K.push(e)}const he=new Set;let U=0;function Je(){if(U!==0)return;const e=Y;do{try{for(;U<J.length;){const t=J[U];U++,X(t),bt(t.$$)}}catch(t){throw J.length=0,U=0,t}for(X(null),J.length=0,U=0;Se.length;)Se.pop()();for(let t=0;t<K.length;t+=1){const n=K[t];he.has(n)||(he.add(n),n())}K.length=0}while(J.length);for(;Ne.length;)Ne.pop()();me=!1,he.clear(),X(e)}function bt(e){if(e.fragment!==null){e.update(),B(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(ge)}}function kt(e){const t=[],n=[];K.forEach(r=>e.indexOf(r)===-1?t.push(r):n.push(r)),n.forEach(r=>r()),K=t}const re=new Set;let H;function de(){H={r:0,c:[],p:H}}function _e(){H.r||B(H.c),H=H.p}function O(e,t){e&&e.i&&(re.delete(e),e.i(t))}function F(e,t,n,r){if(e&&e.o){if(re.has(e))return;re.add(e),H.c.push(()=>{re.delete(e),r&&(n&&e.d(1),r())}),e.o(t)}else r&&r()}function We(e,t){e.d(1),t.delete(e.key)}function Ke(e,t,n,r,s,i,o,l,c,u,a,d){let p=e.length,w=i.length,y=p;const C={};for(;y--;)C[e[y].key]=y;const _=[],v=new Map,m=new Map,b=[];for(y=w;y--;){const N=d(s,i,y),$=n(N);let E=o.get($);E?r&&b.push(()=>E.p(N,t)):(E=u($,N),E.c()),v.set($,_[y]=E),$ in C&&m.set($,Math.abs(y-C[$]))}const f=new Set,g=new Set;function S(N){O(N,1),N.m(l,a),o.set(N.key,N),a=N.first,w--}for(;p&&w;){const N=_[w-1],$=e[p-1],E=N.key,T=$.key;N===$?(a=N.first,p--,w--):v.has(T)?!o.has(E)||f.has(E)?S(N):g.has(T)?p--:m.get(E)>m.get(T)?(g.add(E),S(N)):(f.add(T),p--):(c($,o),p--)}for(;p--;){const N=e[p];v.has(N.key)||c(N,o)}for(;w;)S(_[w-1]);return B(b),_}function oe(e){e&&e.c()}function G(e,t,n,r){const{fragment:s,after_update:i}=e.$$;s&&s.m(t,n),r||ge(()=>{const o=e.$$.on_mount.map(Ve).filter(Z);e.$$.on_destroy?e.$$.on_destroy.push(...o):B(o),e.$$.on_mount=[]}),i.forEach(ge)}function ee(e,t){const n=e.$$;n.fragment!==null&&(kt(n.after_update),B(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function At(e,t){e.$$.dirty[0]===-1&&(J.push(e),wt(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function le(e,t,n,r,s,i,o,l=[-1]){const c=Y;X(e);const u=e.$$={fragment:null,ctx:[],props:i,update:z,not_equal:s,bound:$e(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(c?c.$$.context:[])),callbacks:$e(),dirty:l,skip_bound:!1,root:t.target||c.$$.root};o&&o(u.root);let a=!1;if(u.ctx=n?n(e,t.props||{},(d,p,...w)=>{const y=w.length?w[0]:p;return u.ctx&&s(u.ctx[d],u.ctx[d]=y)&&(!u.skip_bound&&u.bound[d]&&u.bound[d](y),a&&At(e,d)),p}):[],u.update(),a=!0,B(u.before_update),u.fragment=r?r(u.ctx):!1,t.target){if(t.hydrate){const d=mt(t.target);u.fragment&&u.fragment.l(d),d.forEach(P)}else u.fragment&&u.fragment.c();t.intro&&O(e.$$.fragment),G(e,t.target,t.anchor,t.customElement),Je()}X(c)}class ce{$destroy(){ee(this,1),this.$destroy=z}$on(t,n){if(!Z(n))return z;const r=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return r.push(n),()=>{const s=r.indexOf(n);s!==-1&&r.splice(s,1)}}$set(t){this.$$set&&!ht(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const x=[];function ue(e,t=z){let n;const r=new Set;function s(l){if(j(e,l)&&(e=l,n)){const c=!x.length;for(const u of r)u[1](),x.push(u,e);if(c){for(let u=0;u<x.length;u+=2)x[u][0](x[u+1]);x.length=0}}}function i(l){s(l(e))}function o(l,c=z){const u=[l,c];return r.add(u),r.size===1&&(n=t(s)||z),l(e),()=>{r.delete(u),r.size===0&&n&&(n(),n=null)}}return{set:s,update:i,subscribe:o}}function Ee(e){return Object.prototype.toString.call(e)==="[object Date]"}function ve(e,t){if(e===t||e!==e)return()=>e;const n=typeof e;if(n!==typeof t||Array.isArray(e)!==Array.isArray(t))throw new Error("Cannot interpolate values of different type");if(Array.isArray(e)){const r=t.map((s,i)=>ve(e[i],s));return s=>r.map(i=>i(s))}if(n==="object"){if(!e||!t)throw new Error("Object cannot be null");if(Ee(e)&&Ee(t)){e=e.getTime(),t=t.getTime();const i=t-e;return o=>new Date(e+o*i)}const r=Object.keys(t),s={};return r.forEach(i=>{s[i]=ve(e[i],t[i])}),i=>{const o={};return r.forEach(l=>{o[l]=s[l](i)}),o}}if(n==="number"){const r=t-e;return s=>e+s*r}throw new Error(`Cannot interpolate ${n} values`)}function Ct(e,t={}){const n=ue(e);let r,s=e;function i(o,l){if(e==null)return n.set(e=o),Promise.resolve();s=o;let c=r,u=!1,{delay:a=0,duration:d=400,easing:p=ft,interpolate:w=ve}=Ce(Ce({},t),l);if(d===0)return c&&(c.abort(),c=null),n.set(e=s),Promise.resolve();const y=_t()+a;let C;return r=pt(_=>{if(_<y)return!0;u||(C=w(e,o),typeof d=="function"&&(d=d(e,o)),u=!0),c&&(c.abort(),c=null);const v=_-y;return v>d?(n.set(e=o),!1):(n.set(e=C(p(v/d))),!0)}),r.promise}return{set:i,update:(o,l)=>i(o(s,e),l),subscribe:n.subscribe}}const ne=ue([]),pe=ue([]),$t=["Who","What","How","Why","Where","Does","Can","N/A"];Ct($t.map(e=>({question:e,count:0})));function Le(e,t,n){const r=e.slice();return r[13]=t[n],r[15]=n,r}function Te(e){let t,n,r,s,i;function o(){return e[8](e[15])}function l(){return e[9](e[15])}return{c(){t=A("button"),t.textContent="ðŸ‘",n=L(),r=A("button"),r.textContent="ðŸ‘Ž",k(t,"class","small-button thumbs-up svelte-ysjhkz"),k(r,"class","small-button thumbs-down svelte-ysjhkz")},m(c,u){V(c,t,u),V(c,n,u),V(c,r,u),s||(i=[D(t,"click",o),D(r,"click",l)],s=!0)},p(c,u){e=c},d(c){c&&P(t),c&&P(n),c&&P(r),s=!1,B(i)}}}function Oe(e,t){let n,r,s,i,o,l,c,u=t[13].question+"",a,d,p,w,y=t[13].answer+"",C,_,v,m,b,f,g=t[0]&&Te(t);return{key:e,first:null,c(){n=A("div"),r=A("div"),s=A("div"),i=L(),o=A("div"),l=A("p"),c=R("Q: "),a=R(u),d=L(),p=A("p"),w=R("A: "),C=R(y),_=L(),g&&g.c(),v=L(),k(s,"class","avatar svelte-ysjhkz"),k(l,"class","svelte-ysjhkz"),k(p,"class","svelte-ysjhkz"),k(o,"class","message-content svelte-ysjhkz"),k(r,"class","chat-message-center svelte-ysjhkz"),k(n,"class","chat-message svelte-ysjhkz"),this.first=n},m(S,N){V(S,n,N),h(n,r),h(r,s),h(r,i),h(r,o),h(o,l),h(l,c),h(l,a),h(o,d),h(o,p),h(p,w),h(p,C),h(o,_),g&&g.m(o,null),h(n,v),b||(f=He(m=Nt.call(null,n,t[15]===t[1].length-1)),b=!0)},p(S,N){t=S,N&2&&u!==(u=t[13].question+"")&&I(a,u),N&2&&y!==(y=t[13].answer+"")&&I(C,y),t[0]?g?g.p(t,N):(g=Te(t),g.c(),g.m(o,null)):g&&(g.d(1),g=null),m&&Z(m.update)&&N&2&&m.update.call(null,t[15]===t[1].length-1)},d(S){S&&P(n),g&&g.d(),b=!1,f()}}}function St(e){let t,n,r=[],s=new Map,i,o,l,c,u,a,d=(e[3]?e[4]:"Send")+"",p,w,y,C,_,v,m=e[1];const b=f=>f[15];for(let f=0;f<m.length;f+=1){let g=Le(e,m,f),S=b(g);s.set(S,r[f]=Oe(S,g))}return{c(){t=A("section"),n=A("div");for(let f=0;f<r.length;f+=1)r[f].c();i=L(),o=A("div"),l=A("form"),c=A("input"),u=L(),a=A("button"),p=R(d),y=L(),C=A("p"),C.textContent="Note - may produce inaccurate information.",k(n,"class","chat-log svelte-ysjhkz"),k(c,"class","chat-input-textarea svelte-ysjhkz"),k(c,"placeholder","Type Message Here"),k(a,"class",w="btnyousend "+(e[2]===""?"":"active")+" svelte-ysjhkz"),k(a,"type","submit"),k(l,"class","chat-input-form svelte-ysjhkz"),k(C,"class","message svelte-ysjhkz"),k(o,"class","chat-input-holder svelte-ysjhkz"),k(t,"class","chatbox svelte-ysjhkz")},m(f,g){V(f,t,g),h(t,n);for(let S=0;S<r.length;S+=1)r[S]&&r[S].m(n,null);h(t,i),h(t,o),h(o,l),h(l,c),se(c,e[2]),h(l,u),h(l,a),h(a,p),h(o,y),h(o,C),_||(v=[D(c,"input",e[10]),D(l,"submit",e[5])],_=!0)},p(f,[g]){g&67&&(m=f[1],r=Ke(r,g,b,1,f,m,s,n,We,Oe,null,Le)),g&4&&c.value!==f[2]&&se(c,f[2]),g&24&&d!==(d=(f[3]?f[4]:"Send")+"")&&I(p,d),g&4&&w!==(w="btnyousend "+(f[2]===""?"":"active")+" svelte-ysjhkz")&&k(a,"class",w)},i:z,o:z,d(f){f&&P(t);for(let g=0;g<r.length;g+=1)r[g].d();_=!1,B(v)}}}function Nt(e){setTimeout(()=>{e.scrollIntoView({behavior:"smooth"})},0)}function Et(e,t,n){let r,s;Be(e,ne,_=>n(1,s=_));let{feedback:i=!1}=t,o="",l="",c=!1;xe(()=>{u()});async function u(){console.log("fetching data from db");const b=(await(await fetch("http://127.0.0.1:5000/chat/qa_table/retrieve")).json()).rows.map(f=>({id:f[0],question:f[1],answer:f[2],vote_status:f[3]}));ye(ne,s=[...b],s)}const a=async _=>{_.preventDefault(),o=l,n(2,l=""),n(3,c=!0);let v={id:s.length+1,question:o,answer:"Loading...",vote_status:"na"};console.log("adding to log here"),ye(ne,s=[...s,v],s);const m=await fetch(`/chat/${o}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:o})});if(m.ok){const b=await m.json();v.answer=b.answer,ne.update(f=>(f[f.length-1]=v,f))}else{const b=await m.text();alert(b)}n(3,c=!1)};let d=0;setInterval(()=>{n(7,d=(d+1)%4)},200);async function p(_,v){const m=s[v];m.vote=_;const b={id:v+1,vote_status:_};console.log(b),console.log(b);const f=await fetch("http://127.0.0.1:5000/chat/qa_table/update",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(b)});if(f.ok)console.log("update worked!",f);else{const g=await f.text();alert(g)}}const w=_=>p("up",_),y=_=>p("down",_);function C(){l=this.value,n(2,l)}return e.$$set=_=>{"feedback"in _&&n(0,i=_.feedback)},e.$$.update=()=>{e.$$.dirty&128&&n(4,r=".".repeat(d).padEnd(3)),e.$$.dirty&2&&console.log("chat updated!",s)},[i,s,l,c,r,a,p,d,w,y,C]}class Xe extends ce{constructor(t){super(),le(this,t,Et,St,j,{feedback:0})}}var we="http://www.w3.org/1999/xhtml";const ze={svg:"http://www.w3.org/2000/svg",xhtml:we,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Ye(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),ze.hasOwnProperty(t)?{space:ze[t],local:e}:e}function Lt(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===we&&t.documentElement.namespaceURI===we?t.createElement(e):t.createElementNS(n,e)}}function Tt(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Ze(e){var t=Ye(e);return(t.local?Tt:Lt)(t)}function Ot(){}function je(e){return e==null?Ot:function(){return this.querySelector(e)}}function zt(e){typeof e!="function"&&(e=je(e));for(var t=this._groups,n=t.length,r=new Array(n),s=0;s<n;++s)for(var i=t[s],o=i.length,l=r[s]=new Array(o),c,u,a=0;a<o;++a)(c=i[a])&&(u=e.call(c,c.__data__,a,i))&&("__data__"in c&&(u.__data__=c.__data__),l[a]=u);return new M(r,this._parents)}function qt(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Mt(){return[]}function Rt(e){return e==null?Mt:function(){return this.querySelectorAll(e)}}function Pt(e){return function(){return qt(e.apply(this,arguments))}}function Ft(e){typeof e=="function"?e=Pt(e):e=Rt(e);for(var t=this._groups,n=t.length,r=[],s=[],i=0;i<n;++i)for(var o=t[i],l=o.length,c,u=0;u<l;++u)(c=o[u])&&(r.push(e.call(c,c.__data__,u,o)),s.push(c));return new M(r,s)}function Dt(e){return function(){return this.matches(e)}}function Ge(e){return function(t){return t.matches(e)}}var Vt=Array.prototype.find;function Bt(e){return function(){return Vt.call(this.children,e)}}function Ht(){return this.firstElementChild}function It(e){return this.select(e==null?Ht:Bt(typeof e=="function"?e:Ge(e)))}var Qt=Array.prototype.filter;function Ut(){return Array.from(this.children)}function xt(e){return function(){return Qt.call(this.children,e)}}function Jt(e){return this.selectAll(e==null?Ut:xt(typeof e=="function"?e:Ge(e)))}function Wt(e){typeof e!="function"&&(e=Dt(e));for(var t=this._groups,n=t.length,r=new Array(n),s=0;s<n;++s)for(var i=t[s],o=i.length,l=r[s]=[],c,u=0;u<o;++u)(c=i[u])&&e.call(c,c.__data__,u,i)&&l.push(c);return new M(r,this._parents)}function et(e){return new Array(e.length)}function Kt(){return new M(this._enter||this._groups.map(et),this._parents)}function ie(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}ie.prototype={constructor:ie,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Xt(e){return function(){return e}}function Yt(e,t,n,r,s,i){for(var o=0,l,c=t.length,u=i.length;o<u;++o)(l=t[o])?(l.__data__=i[o],r[o]=l):n[o]=new ie(e,i[o]);for(;o<c;++o)(l=t[o])&&(s[o]=l)}function Zt(e,t,n,r,s,i,o){var l,c,u=new Map,a=t.length,d=i.length,p=new Array(a),w;for(l=0;l<a;++l)(c=t[l])&&(p[l]=w=o.call(c,c.__data__,l,t)+"",u.has(w)?s[l]=c:u.set(w,c));for(l=0;l<d;++l)w=o.call(e,i[l],l,i)+"",(c=u.get(w))?(r[l]=c,c.__data__=i[l],u.delete(w)):n[l]=new ie(e,i[l]);for(l=0;l<a;++l)(c=t[l])&&u.get(p[l])===c&&(s[l]=c)}function jt(e){return e.__data__}function Gt(e,t){if(!arguments.length)return Array.from(this,jt);var n=t?Zt:Yt,r=this._parents,s=this._groups;typeof e!="function"&&(e=Xt(e));for(var i=s.length,o=new Array(i),l=new Array(i),c=new Array(i),u=0;u<i;++u){var a=r[u],d=s[u],p=d.length,w=en(e.call(a,a&&a.__data__,u,r)),y=w.length,C=l[u]=new Array(y),_=o[u]=new Array(y),v=c[u]=new Array(p);n(a,d,C,_,v,w,t);for(var m=0,b=0,f,g;m<y;++m)if(f=C[m]){for(m>=b&&(b=m+1);!(g=_[b])&&++b<y;);f._next=g||null}}return o=new M(o,r),o._enter=l,o._exit=c,o}function en(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function tn(){return new M(this._exit||this._groups.map(et),this._parents)}function nn(e,t,n){var r=this.enter(),s=this,i=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(s=t(s),s&&(s=s.selection())),n==null?i.remove():n(i),r&&s?r.merge(s).order():s}function rn(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,s=n.length,i=r.length,o=Math.min(s,i),l=new Array(s),c=0;c<o;++c)for(var u=n[c],a=r[c],d=u.length,p=l[c]=new Array(d),w,y=0;y<d;++y)(w=u[y]||a[y])&&(p[y]=w);for(;c<s;++c)l[c]=n[c];return new M(l,this._parents)}function sn(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],s=r.length-1,i=r[s],o;--s>=0;)(o=r[s])&&(i&&o.compareDocumentPosition(i)^4&&i.parentNode.insertBefore(o,i),i=o);return this}function on(e){e||(e=ln);function t(d,p){return d&&p?e(d.__data__,p.__data__):!d-!p}for(var n=this._groups,r=n.length,s=new Array(r),i=0;i<r;++i){for(var o=n[i],l=o.length,c=s[i]=new Array(l),u,a=0;a<l;++a)(u=o[a])&&(c[a]=u);c.sort(t)}return new M(s,this._parents).order()}function ln(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function cn(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function un(){return Array.from(this)}function an(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],s=0,i=r.length;s<i;++s){var o=r[s];if(o)return o}return null}function fn(){let e=0;for(const t of this)++e;return e}function hn(){return!this.node()}function dn(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var s=t[n],i=0,o=s.length,l;i<o;++i)(l=s[i])&&e.call(l,l.__data__,i,s);return this}function _n(e){return function(){this.removeAttribute(e)}}function pn(e){return function(){this.removeAttributeNS(e.space,e.local)}}function yn(e,t){return function(){this.setAttribute(e,t)}}function mn(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function gn(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function vn(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function wn(e,t){var n=Ye(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?pn:_n:typeof t=="function"?n.local?vn:gn:n.local?mn:yn)(n,t))}function tt(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function bn(e){return function(){this.style.removeProperty(e)}}function kn(e,t,n){return function(){this.style.setProperty(e,t,n)}}function An(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function Cn(e,t,n){return arguments.length>1?this.each((t==null?bn:typeof t=="function"?An:kn)(e,t,n??"")):$n(this.node(),e)}function $n(e,t){return e.style.getPropertyValue(t)||tt(e).getComputedStyle(e,null).getPropertyValue(t)}function Sn(e){return function(){delete this[e]}}function Nn(e,t){return function(){this[e]=t}}function En(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function Ln(e,t){return arguments.length>1?this.each((t==null?Sn:typeof t=="function"?En:Nn)(e,t)):this.node()[e]}function nt(e){return e.trim().split(/^|\s+/)}function be(e){return e.classList||new rt(e)}function rt(e){this._node=e,this._names=nt(e.getAttribute("class")||"")}rt.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function st(e,t){for(var n=be(e),r=-1,s=t.length;++r<s;)n.add(t[r])}function it(e,t){for(var n=be(e),r=-1,s=t.length;++r<s;)n.remove(t[r])}function Tn(e){return function(){st(this,e)}}function On(e){return function(){it(this,e)}}function zn(e,t){return function(){(t.apply(this,arguments)?st:it)(this,e)}}function qn(e,t){var n=nt(e+"");if(arguments.length<2){for(var r=be(this.node()),s=-1,i=n.length;++s<i;)if(!r.contains(n[s]))return!1;return!0}return this.each((typeof t=="function"?zn:t?Tn:On)(n,t))}function Mn(){this.textContent=""}function Rn(e){return function(){this.textContent=e}}function Pn(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function Fn(e){return arguments.length?this.each(e==null?Mn:(typeof e=="function"?Pn:Rn)(e)):this.node().textContent}function Dn(){this.innerHTML=""}function Vn(e){return function(){this.innerHTML=e}}function Bn(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function Hn(e){return arguments.length?this.each(e==null?Dn:(typeof e=="function"?Bn:Vn)(e)):this.node().innerHTML}function In(){this.nextSibling&&this.parentNode.appendChild(this)}function Qn(){return this.each(In)}function Un(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function xn(){return this.each(Un)}function Jn(e){var t=typeof e=="function"?e:Ze(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function Wn(){return null}function Kn(e,t){var n=typeof e=="function"?e:Ze(e),r=t==null?Wn:typeof t=="function"?t:je(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function Xn(){var e=this.parentNode;e&&e.removeChild(this)}function Yn(){return this.each(Xn)}function Zn(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function jn(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Gn(e){return this.select(e?jn:Zn)}function er(e){return arguments.length?this.property("__data__",e):this.node().__data__}function tr(e){return function(t){e.call(this,t,this.__data__)}}function nr(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function rr(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,s=t.length,i;n<s;++n)i=t[n],(!e.type||i.type===e.type)&&i.name===e.name?this.removeEventListener(i.type,i.listener,i.options):t[++r]=i;++r?t.length=r:delete this.__on}}}function sr(e,t,n){return function(){var r=this.__on,s,i=tr(t);if(r){for(var o=0,l=r.length;o<l;++o)if((s=r[o]).type===e.type&&s.name===e.name){this.removeEventListener(s.type,s.listener,s.options),this.addEventListener(s.type,s.listener=i,s.options=n),s.value=t;return}}this.addEventListener(e.type,i,n),s={type:e.type,name:e.name,value:t,listener:i,options:n},r?r.push(s):this.__on=[s]}}function ir(e,t,n){var r=nr(e+""),s,i=r.length,o;if(arguments.length<2){var l=this.node().__on;if(l){for(var c=0,u=l.length,a;c<u;++c)for(s=0,a=l[c];s<i;++s)if((o=r[s]).type===a.type&&o.name===a.name)return a.value}return}for(l=t?sr:rr,s=0;s<i;++s)this.each(l(r[s],t,n));return this}function ot(e,t,n){var r=tt(e),s=r.CustomEvent;typeof s=="function"?s=new s(t,n):(s=r.document.createEvent("Event"),n?(s.initEvent(t,n.bubbles,n.cancelable),s.detail=n.detail):s.initEvent(t,!1,!1)),e.dispatchEvent(s)}function or(e,t){return function(){return ot(this,e,t)}}function lr(e,t){return function(){return ot(this,e,t.apply(this,arguments))}}function cr(e,t){return this.each((typeof t=="function"?lr:or)(e,t))}function*ur(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],s=0,i=r.length,o;s<i;++s)(o=r[s])&&(yield o)}var ar=[null];function M(e,t){this._groups=e,this._parents=t}function fr(){return this}M.prototype={constructor:M,select:zt,selectAll:Ft,selectChild:It,selectChildren:Jt,filter:Wt,data:Gt,enter:Kt,exit:tn,join:nn,merge:rn,selection:fr,order:sn,sort:on,call:cn,nodes:un,node:an,size:fn,empty:hn,each:dn,attr:wn,style:Cn,property:Ln,classed:qn,text:Fn,html:Hn,raise:Qn,lower:xn,append:Jn,insert:Kn,remove:Yn,clone:Gn,datum:er,on:ir,dispatch:cr,[Symbol.iterator]:ur};function qe(e){return typeof e=="string"?new M([[document.querySelector(e)]],[document.documentElement]):new M([[e]],ar)}function Me(e,t,n){const r=e.slice();return r[14]=t[n],r[16]=n,r}function Re(e,t){let n,r,s,i,o,l,c,u,a,d=t[14].question+"",p,w,y,C,_,v,m,b=t[14].up_ranking_answer+"",f,g,S,N,$,E,T=t[14].low_ranking_answer+"",ae,ke,te,fe,Ae;function lt(...q){return t[7](t[14],t[16],...q)}function ct(...q){return t[8](t[14],t[16],...q)}function ut(...q){return t[9](t[14],t[16],...q)}function at(...q){return t[10](t[14],t[16],...q)}return{key:e,first:null,c(){n=A("div"),r=A("div"),s=A("div"),i=L(),o=A("div"),l=A("div"),c=A("h5"),c.textContent="Question:",u=L(),a=A("p"),p=R(d),w=L(),y=A("div"),C=A("div"),_=A("h5"),_.textContent="Response 1:",v=L(),m=A("p"),f=R(b),g=L(),S=A("div"),N=A("h5"),N.textContent="Response 2:",$=L(),E=A("p"),ae=R(T),ke=L(),k(s,"class","avatar"),k(c,"class","bold svelte-au920n"),k(l,"class","question svelte-au920n"),k(_,"class","bold underline svelte-au920n"),k(C,"class","answer svelte-au920n"),k(N,"class","bold underline svelte-au920n"),k(S,"class","answer svelte-au920n"),k(y,"class","answers svelte-au920n"),k(o,"class","message-content svelte-au920n"),k(r,"class","chat-message-center svelte-au920n"),k(n,"class","chat-message svelte-au920n"),this.first=n},m(q,Q){V(q,n,Q),h(n,r),h(r,s),h(r,i),h(r,o),h(o,l),h(l,c),h(l,u),h(l,a),h(a,p),h(o,w),h(o,y),h(y,C),h(C,_),h(C,v),h(C,m),h(m,f),h(y,g),h(y,S),h(S,N),h(S,$),h(S,E),h(E,ae),h(n,ke),fe||(Ae=[D(C,"click",lt),D(C,"keydown",ct),D(S,"click",ut),D(S,"keydown",at),He(te=dr.call(null,n,t[16]===t[3].length-1))],fe=!0)},p(q,Q){t=q,Q&8&&d!==(d=t[14].question+"")&&I(p,d),Q&8&&b!==(b=t[14].up_ranking_answer+"")&&I(f,b),Q&8&&T!==(T=t[14].low_ranking_answer+"")&&I(ae,T),te&&Z(te.update)&&Q&8&&te.update.call(null,t[16]===t[3].length-1)},d(q){q&&P(n),fe=!1,B(Ae)}}}function hr(e){let t,n,r,s,i,o,l=[],c=new Map,u,a,d,p,w,y,C=(e[1]?e[2]:"Send")+"",_,v,m,b,f,g,S=e[3];const N=$=>$[16];for(let $=0;$<S.length;$+=1){let E=Me(e,S,$),T=N(E);c.set(T,l[$]=Re(T,E))}return{c(){t=A("div"),n=A("div"),n.innerHTML=`<h5 class="underline bold svelte-au920n">Ranked Feedback Instructions</h5> 
    <p class="svelte-au920n">Ask a question and click on the better of the two responses. The better
      response will be outlined in <span class="green svelte-au920n">green</span>, the worse
      response outlined in <span class="red svelte-au920n">red</span>. This data will be
      automatically fed to RLHF.</p> 
    <button class="svelte-au920n">Download Data</button>`,r=L(),s=A("div"),i=A("section"),o=A("div");for(let $=0;$<l.length;$+=1)l[$].c();u=L(),a=A("div"),d=A("form"),p=A("input"),w=L(),y=A("button"),_=R(C),m=L(),b=A("p"),b.textContent="Note - may produce inaccurate information.",k(n,"class","instructions svelte-au920n"),k(o,"class","chat-log svelte-au920n"),k(i,"class","chatbox svelte-au920n"),k(p,"class","chat-input-textarea svelte-au920n"),k(p,"placeholder","Type Message Here"),k(y,"class",v="btnyousend "+(e[0]===""?"":"active")+" svelte-au920n"),k(y,"type","submit"),k(d,"class","chat-input-form svelte-au920n"),k(b,"class","message svelte-au920n"),k(a,"class","chat-input-holder svelte-au920n"),k(s,"class","ranked-chat svelte-au920n"),k(t,"class","ranked-feedback-container svelte-au920n")},m($,E){V($,t,E),h(t,n),h(t,r),h(t,s),h(s,i),h(i,o);for(let T=0;T<l.length;T+=1)l[T]&&l[T].m(o,null);h(s,u),h(s,a),h(a,d),h(d,p),se(p,e[0]),h(d,w),h(d,y),h(y,_),h(a,m),h(a,b),f||(g=[D(p,"input",e[11]),D(d,"submit",e[4])],f=!0)},p($,[E]){E&40&&(S=$[3],l=Ke(l,E,N,1,$,S,c,o,We,Re,null,Me)),E&1&&p.value!==$[0]&&se(p,$[0]),E&6&&C!==(C=($[1]?$[2]:"Send")+"")&&I(_,C),E&1&&v!==(v="btnyousend "+($[0]===""?"":"active")+" svelte-au920n")&&k(y,"class",v)},i:z,o:z,d($){$&&P(t);for(let E=0;E<l.length;E+=1)l[E].d();f=!1,B(g)}}}function dr(e){setTimeout(()=>{e.scrollIntoView({behavior:"smooth"})},0)}async function _r(e){const t=await fetch("http://127.0.0.1:5000/chat/ranking_table/update",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){const n=await t.text();alert(n)}}function pr(e,t,n){let r,s;Be(e,pe,_=>n(3,s=_));let i="",o="",l=!1;xe(()=>{});const c=async _=>{_.preventDefault(),i=o,n(0,o=""),n(1,l=!0);let v={question:i,up_ranking_answer:"Loading...",low_ranking_answer:"Loading..."};ye(pe,s=[...s,v],s);const m=await fetch(`/chat/ranking_table/${i}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:i})});if(m.ok){const b=await m.json();v.up_ranking_answer=b.answer[0],v.low_ranking_answer=b.answer[1],pe.update(f=>(f[f.length-1]=v,f))}else{const b=await m.text();alert(b)}n(1,l=!1)};let u=0;setInterval(()=>{n(6,u=(u+1)%4)},200);function a(_,v,m,b){const f=s[m],g={1:"up_ranking_answer",2:"low_ranking_answer"},S={question:f.question,up_ranking_answer:f[g[b]],low_ranking_answer:f[g[b%2+1]]};_r(S),qe(_.currentTarget.parentNode).selectAll("div").style("outline","2px solid var(--red)").style("border","1px solid var(--red)"),qe(_.currentTarget).style("outline","2px solid var(--green)").style("border","1px solid var(--green)")}const d=(_,v,m)=>a(m,_,v,1),p=(_,v,m)=>a(m,_,v,1),w=(_,v,m)=>a(m,_,v,2),y=(_,v,m)=>a(m,_,v,2);function C(){o=this.value,n(0,o)}return e.$$.update=()=>{e.$$.dirty&64&&n(2,r=".".repeat(u).padEnd(3))},[o,l,r,s,c,a,u,d,p,w,y,C]}class yr extends ce{constructor(t){super(),le(this,t,pr,hr,j,{})}}function Pe(e){let t,n;return t=new Xe({}),{c(){oe(t.$$.fragment)},m(r,s){G(t,r,s),n=!0},i(r){n||(O(t.$$.fragment,r),n=!0)},o(r){F(t.$$.fragment,r),n=!1},d(r){ee(t,r)}}}function Fe(e){let t,n;return t=new Xe({props:{feedback:!0}}),{c(){oe(t.$$.fragment)},m(r,s){G(t,r,s),n=!0},i(r){n||(O(t.$$.fragment,r),n=!0)},o(r){F(t.$$.fragment,r),n=!1},d(r){ee(t,r)}}}function De(e){let t,n;return t=new yr({}),{c(){oe(t.$$.fragment)},m(r,s){G(t,r,s),n=!0},i(r){n||(O(t.$$.fragment,r),n=!0)},o(r){F(t.$$.fragment,r),n=!1},d(r){ee(t,r)}}}function mr(e){let t,n,r,s,i=!e[0]&&Pe(),o=e[0]==="vote"&&Fe(),l=e[0]==="rank"&&De();return{c(){i&&i.c(),t=L(),o&&o.c(),n=L(),l&&l.c(),r=yt()},m(c,u){i&&i.m(c,u),V(c,t,u),o&&o.m(c,u),V(c,n,u),l&&l.m(c,u),V(c,r,u),s=!0},p(c,[u]){c[0]?i&&(de(),F(i,1,1,()=>{i=null}),_e()):i?u&1&&O(i,1):(i=Pe(),i.c(),O(i,1),i.m(t.parentNode,t)),c[0]==="vote"?o?u&1&&O(o,1):(o=Fe(),o.c(),O(o,1),o.m(n.parentNode,n)):o&&(de(),F(o,1,1,()=>{o=null}),_e()),c[0]==="rank"?l?u&1&&O(l,1):(l=De(),l.c(),O(l,1),l.m(r.parentNode,r)):l&&(de(),F(l,1,1,()=>{l=null}),_e())},i(c){s||(O(i),O(o),O(l),s=!0)},o(c){F(i),F(o),F(l),s=!1},d(c){i&&i.d(c),c&&P(t),o&&o.d(c),c&&P(n),l&&l.d(c),c&&P(r)}}}function gr(e,t,n){let{feedback:r}=t;return e.$$set=s=>{"feedback"in s&&n(0,r=s.feedback)},[r]}class vr extends ce{constructor(t){super(),le(this,t,gr,mr,j,{feedback:0})}}function wr(e){let t,n;return t=new vr({props:{feedback:!0}}),{c(){oe(t.$$.fragment)},m(r,s){G(t,r,s),n=!0},p:z,i(r){n||(O(t.$$.fragment,r),n=!0)},o(r){F(t.$$.fragment,r),n=!1},d(r){ee(t,r)}}}function br(e){const t=ue([]);return fetch("/components").then(n=>n.json()).then(n=>{t.set(n)}),[]}class kr extends ce{constructor(t){super(),le(this,t,br,wr,j,{})}}new kr({target:document.getElementById("app")});
